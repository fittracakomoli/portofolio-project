import{r as o,u as g,j as e,H as b,a as y}from"./app-C3oyVnNA.js";import{A as j}from"./AuthenticatedLayout-BFyco9uJ.js";import{M as N}from"./Modal-BfKeKClk.js";import"./transition-wLD0fClt.js";function k({auth:c,messages:t,flash:m}){const[a,d]=o.useState(null),[x,i]=o.useState(!1),r=g({reply_message:""}),p=s=>{d(s),i(!0),s.is_read||y.patch(route("admin.messages.markAsRead",s.id),{},{preserveScroll:!0,onSuccess:()=>{s.is_read=!0}})},l=()=>{i(!1),d(null),r.reset()},h=s=>{s.preventDefault(),a&&r.post(route("admin.messages.reply",a.id),{onSuccess:()=>{l(),alert("Balasan berhasil dikirim!")},onError:u=>{console.error(u)}})},n=m?.success;return e.jsxs(j,{user:c.user,header:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Daftar Pesan Kontak"}),children:[e.jsx(b,{title:"Pesan Kontak"}),n&&e.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mx-auto max-w-7xl mt-4",role:"alert",children:e.jsx("span",{className:"block sm:inline",children:n})}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Pesan Masuk (",t.length,")"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsx("tr",{})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(s=>e.jsxs("tr",{className:`cursor-pointer hover:bg-gray-100 ${s.is_read?"":"bg-yellow-50 font-semibold"}`,onClick:()=>p(s),children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[s.name,!s.is_read&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Baru"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.email}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-lg truncate",children:s.message}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]},s.id))})]})}),t.length===0&&e.jsx("p",{className:"text-center py-4 text-gray-500",children:"Belum ada pesan masuk."})]})})})}),a&&e.jsx(N,{show:x,onClose:l,maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Detail Pesan"}),e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Dari:"})," ",a.name," ","<",a.email,">"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tanggal:"})," ",new Date(a.created_at).toLocaleString()]})]}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg mb-6",children:e.jsx("p",{className:"whitespace-pre-wrap",children:a.message})}),e.jsxs("form",{onSubmit:h,children:[e.jsx("h4",{className:"text-xl font-semibold mb-2",children:"Balas Email"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"reply_message",className:"block text-sm font-medium text-gray-700",children:"Pesan Balasan:"}),e.jsx("textarea",{id:"reply_message",value:r.data.reply_message,onChange:s=>r.setData("reply_message",s.target.value),rows:"5",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",placeholder:`Membalas ke ${a.email}...`,required:!0}),r.errors.reply_message&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:r.errors.reply_message})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300",children:"Tutup"}),e.jsx("button",{type:"submit",disabled:r.processing,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:r.processing?"Mengirim...":"Kirim Balasan"})]})]})]})})]})}export{k as default};
